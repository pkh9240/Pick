



/* 회원정보 */
DROP TABLE USERS 
	CASCADE CONSTRAINTS;

/* 댓글 */
DROP TABLE COMT 
	CASCADE CONSTRAINTS;

/* 투표권한 */
DROP TABLE VOTE_AUTH 
	CASCADE CONSTRAINTS;

/* 관심사 */
DROP TABLE INTR 
	CASCADE CONSTRAINTS;

/*  투표 */
DROP TABLE VOTE 
	CASCADE CONSTRAINTS;

/* 선택지 */
DROP TABLE CHOI 
	CASCADE CONSTRAINTS;

/* 투표자 */
DROP TABLE USER_VOTE 
	CASCADE CONSTRAINTS;

/* 회원관심사 */
DROP TABLE USER_INTR 
	CASCADE CONSTRAINTS;
/*시퀀스 돈터치 */
DROP SEQUENCE seq_user_no;
DROP SEQUENCE seq_intr_no;

CREATE SEQUENCE seq_user_no	 	INCREMENT BY 1 START WITH 10000;
CREATE SEQUENCE seq_intr_no  	INCREMENT BY 1 START WITH 10000;	
	





/* 회원정보 */
CREATE TABLE USERS (
	USER_NO INTEGER NOT NULL, /* 회원일련번호 */
	USER_NAME VARCHAR2(50), /* 회원이름 */
	USER_PWD VARCHAR2(50) NOT NULL, /* 회원비밀번호 */
	USER_GEND VARCHAR2(20) NOT NULL, /* 회원성별 */
	USER_AGE VARCHAR2(20) NOT NULL, /* 회원나이 */
	USER_MAIL VARCHAR2(40) NOT NULL, /* 회원이메일 */
	USER_PHOT VARCHAR2(255), /* 회원사진 */
	USER_TYPE VARCHAR2(50) /* 회원유형 */
);

COMMENT ON TABLE USERS IS '회원정보';

COMMENT ON COLUMN USERS.USER_NO IS '회원일련번호';

COMMENT ON COLUMN USERS.USER_NAME IS '회원이름';

COMMENT ON COLUMN USERS.USER_PWD IS '회원비밀번호';

COMMENT ON COLUMN USERS.USER_GEND IS '회원성별';

COMMENT ON COLUMN USERS.USER_AGE IS '회원나이';

COMMENT ON COLUMN USERS.USER_MAIL IS '회원이메일';

COMMENT ON COLUMN USERS.USER_PHOT IS '회원사진';

COMMENT ON COLUMN USERS.USER_TYPE IS '회원유형';

CREATE UNIQUE INDEX PK_USERS
	ON USERS (
		USER_NO ASC
	);

ALTER TABLE USERS
	ADD
		CONSTRAINT PK_USERS
		PRIMARY KEY (
			USER_NO
		);

/* 댓글 */
CREATE TABLE COMT (
	COMT_NO INTEGER NOT NULL, /* 댓글일련번호 */
	VOTE_NO INTEGER NOT NULL, /* 투표일련번호 */
	USER_NO INTEGER NOT NULL, /* 회원일련번호 */
	COMT_CONT CLOB NOT NULL, /* 댓글내용 */
	REG_DATE DATE NOT NULL /* 댓글작성일자 */
);

COMMENT ON TABLE COMT IS '댓글';

COMMENT ON COLUMN COMT.COMT_NO IS '댓글일련번호';

COMMENT ON COLUMN COMT.VOTE_NO IS '투표일련번호';

COMMENT ON COLUMN COMT.USER_NO IS '회원일련번호';

COMMENT ON COLUMN COMT.COMT_CONT IS '댓글내용';

COMMENT ON COLUMN COMT.REG_DATE IS '댓글작성일자';

CREATE UNIQUE INDEX PK_COMT
	ON COMT (
		COMT_NO ASC
	);

ALTER TABLE COMT
	ADD
		CONSTRAINT PK_COMT
		PRIMARY KEY (
			COMT_NO
		);

/* 투표권한 */
CREATE TABLE VOTE_AUTH (
	AUTH_NO INTEGER NOT NULL, /* 투표권한일련번호 */
	VOTE_NO INTEGER NOT NULL, /* 투표일련번호 */
	MALE CHAR(1) NOT NULL, /* 남자 */
	F_MALE CHAR(1) NOT NULL, /* 여자 */
	ONE CHAR(1) NOT NULL, /* 10대 */
	TWO CHAR(1) NOT NULL, /* 20대 */
	THRE CHAR(1) NOT NULL, /* 30대 */
	FOUR CHAR(1) NOT NULL, /* 40대 */
	FIVE CHAR(1) NOT NULL, /* 50대 */
	SIX CHAR(1) NOT NULL /* 60대 */
);

COMMENT ON TABLE VOTE_AUTH IS '투표권한';

COMMENT ON COLUMN VOTE_AUTH.AUTH_NO IS '투표권한일련번호';

COMMENT ON COLUMN VOTE_AUTH.VOTE_NO IS '투표일련번호';

COMMENT ON COLUMN VOTE_AUTH.MALE IS '남자';

COMMENT ON COLUMN VOTE_AUTH.F_MALE IS '여자';

COMMENT ON COLUMN VOTE_AUTH.ONE IS '10대';

COMMENT ON COLUMN VOTE_AUTH.TWO IS '20대';

COMMENT ON COLUMN VOTE_AUTH.THRE IS '30대';

COMMENT ON COLUMN VOTE_AUTH.FOUR IS '40대';

COMMENT ON COLUMN VOTE_AUTH.FIVE IS '50대';

COMMENT ON COLUMN VOTE_AUTH.SIX IS '60대';

CREATE UNIQUE INDEX PK_VOTE_AUTH
	ON VOTE_AUTH (
		AUTH_NO ASC
	);

ALTER TABLE VOTE_AUTH
	ADD
		CONSTRAINT PK_VOTE_AUTH
		PRIMARY KEY (
			AUTH_NO
		);

/* 관심사 */
CREATE TABLE INTR (
	INTR_NO INTEGER NOT NULL, /* 관심사일련번호 */
	INTR_PHOT VARCHAR2(255) NOT NULL, /* 사진 */
	INTR_CONT CLOB NOT NULL /* 관심사 */
);

COMMENT ON TABLE INTR IS '관심사';

COMMENT ON COLUMN INTR.INTR_NO IS '관심사일련번호';

COMMENT ON COLUMN INTR.INTR_PHOT IS '사진';

COMMENT ON COLUMN INTR.INTR_CONT IS '관심사';

CREATE UNIQUE INDEX PK_INTR
	ON INTR (
		INTR_NO ASC
	);

ALTER TABLE INTR
	ADD
		CONSTRAINT PK_INTR
		PRIMARY KEY (
			INTR_NO
		);

/*  투표 */
CREATE TABLE VOTE (
	VOTE_NO INTEGER NOT NULL, /* 투표일련번호 */
	USER_NO INTEGER NOT NULL, /* 회원일련번호 */
	VOTE_CATG VARCHAR2(50) NOT NULL, /* 카테고리 */
	VOTE_TITL VARCHAR2(255) NOT NULL, /* 제목 */
	VOTE_CONT CLOB NOT NULL, /* 내용 */
	VOTE_HITS INTEGER NOT NULL, /* 조회수 */
	END_DATE DATE NOT NULL, /* 종료일 */
	VOTE_TYPE VARCHAR2(50) NOT NULL, /* 투표종류 */
	VOTE_MAX INTEGER NOT NULL /* 선택가능개수 */
);

COMMENT ON TABLE VOTE IS ' 투표';

COMMENT ON COLUMN VOTE.VOTE_NO IS '투표일련번호';

COMMENT ON COLUMN VOTE.USER_NO IS '회원일련번호';

COMMENT ON COLUMN VOTE.VOTE_CATG IS '카테고리';

COMMENT ON COLUMN VOTE.VOTE_TITL IS '제목';

COMMENT ON COLUMN VOTE.VOTE_CONT IS '내용';

COMMENT ON COLUMN VOTE.VOTE_HITS IS '조회수';

COMMENT ON COLUMN VOTE.END_DATE IS '종료일';

COMMENT ON COLUMN VOTE.VOTE_TYPE IS '투표종류';

COMMENT ON COLUMN VOTE.VOTE_MAX IS '선택가능개수';

CREATE UNIQUE INDEX PK_VOTE
	ON VOTE (
		VOTE_NO ASC
	);

ALTER TABLE VOTE
	ADD
		CONSTRAINT PK_VOTE
		PRIMARY KEY (
			VOTE_NO
		);

/* 선택지 */
CREATE TABLE CHOI (
	CHOI_NO INTEGER NOT NULL, /* 선택지일련번호 */
	VOTE_NO INTEGER NOT NULL, /* 투표일련번호 */
	CHOI_PHOT VARCHAR2(255) NOT NULL, /* 사진 */
	CHOT_CONT CLOB NOT NULL, /* 글 */
	CHOT_CNT INTEGER NOT NULL /* 득표수 */
);

COMMENT ON TABLE CHOI IS '선택지';

COMMENT ON COLUMN CHOI.CHOI_NO IS '선택지일련번호';

COMMENT ON COLUMN CHOI.VOTE_NO IS '투표일련번호';

COMMENT ON COLUMN CHOI.CHOI_PHOT IS '사진';

COMMENT ON COLUMN CHOI.CHOT_CONT IS '글';

COMMENT ON COLUMN CHOI.CHOT_CNT IS '득표수';

CREATE UNIQUE INDEX PK_CHOI
	ON CHOI (
		CHOI_NO ASC
	);

ALTER TABLE CHOI
	ADD
		CONSTRAINT PK_CHOI
		PRIMARY KEY (
			CHOI_NO
		);

/* 투표자 */
CREATE TABLE USER_VOTE (
	USER_NO INTEGER NOT NULL, /* 회원일련번호 */
	VOTE_NO INTEGER NOT NULL /* 투표일련번호 */
);

COMMENT ON TABLE USER_VOTE IS '투표자';

COMMENT ON COLUMN USER_VOTE.USER_NO IS '회원일련번호';

COMMENT ON COLUMN USER_VOTE.VOTE_NO IS '투표일련번호';

CREATE UNIQUE INDEX PK_USER_VOTE
	ON USER_VOTE (
		USER_NO ASC,
		VOTE_NO ASC
	);

ALTER TABLE USER_VOTE
	ADD
		CONSTRAINT PK_USER_VOTE
		PRIMARY KEY (
			USER_NO,
			VOTE_NO
		);

/* 회원관심사 */
CREATE TABLE USER_INTR (
	USER_NO INTEGER NOT NULL, /* 회원일련번호 */
	INTR_NO INTEGER NOT NULL /* 관심사일련번호 */
);

COMMENT ON TABLE USER_INTR IS '회원관심사';

COMMENT ON COLUMN USER_INTR.USER_NO IS '회원일련번호';

COMMENT ON COLUMN USER_INTR.INTR_NO IS '관심사일련번호';

CREATE UNIQUE INDEX PK_USER_INTR
	ON USER_INTR (
		USER_NO ASC,
		INTR_NO ASC
	);

ALTER TABLE USER_INTR
	ADD
		CONSTRAINT PK_USER_INTR
		PRIMARY KEY (
			USER_NO,
			INTR_NO
		);

ALTER TABLE COMT
	ADD
		CONSTRAINT FK_VOTE_TO_COMT
		FOREIGN KEY (
			VOTE_NO
		)
		REFERENCES VOTE (
			VOTE_NO
		);

ALTER TABLE COMT
	ADD
		CONSTRAINT FK_USERS_TO_COMT
		FOREIGN KEY (
			USER_NO
		)
		REFERENCES USERS (
			USER_NO
		);

ALTER TABLE VOTE_AUTH
	ADD
		CONSTRAINT FK_VOTE_TO_VOTE_AUTH
		FOREIGN KEY (
			VOTE_NO
		)
		REFERENCES VOTE (
			VOTE_NO
		);

ALTER TABLE VOTE
	ADD
		CONSTRAINT FK_USERS_TO_VOTE
		FOREIGN KEY (
			USER_NO
		)
		REFERENCES USERS (
			USER_NO
		);

ALTER TABLE CHOI
	ADD
		CONSTRAINT FK_VOTE_TO_CHOI
		FOREIGN KEY (
			VOTE_NO
		)
		REFERENCES VOTE (
			VOTE_NO
		);

ALTER TABLE USER_VOTE
	ADD
		CONSTRAINT FK_USERS_TO_USER_VOTE
		FOREIGN KEY (
			USER_NO
		)
		REFERENCES USERS (
			USER_NO
		);

ALTER TABLE USER_VOTE
	ADD
		CONSTRAINT FK_VOTE_TO_USER_VOTE
		FOREIGN KEY (
			VOTE_NO
		)
		REFERENCES VOTE (
			VOTE_NO
		);

ALTER TABLE USER_INTR
	ADD
		CONSTRAINT FK_USERS_TO_USER_INTR
		FOREIGN KEY (
			USER_NO
		)
		REFERENCES USERS (
			USER_NO
		);

ALTER TABLE USER_INTR
	ADD
		CONSTRAINT FK_INTR_TO_USER_INTR
		FOREIGN KEY (
			INTR_NO
		)
		REFERENCES INTR (
			INTR_NO
		);
		
		
		
		
		
/*관심사 */


INSERT
INTO INTR(INTR_NO,INTR_PHOT,INTR_CONT)
VALUES (seq_intr_no.nextval,'./images/card6.jpg','COMPUTER');



INSERT
INTO INTR(INTR_NO,INTR_PHOT,INTR_CONT)
VALUES (seq_intr_no.nextval,'../images/card2.jpg','COOK');

INSERT
INTO INTR(INTR_NO,INTR_PHOT,INTR_CONT)
VALUES (seq_intr_no.nextval,'../images/card3.jpg','CODING');

INSERT
INTO INTR(INTR_NO,INTR_PHOT,INTR_CONT)
VALUES (seq_intr_no.nextval,'../images/card4.jpg','JAVA');

INSERT
INTO INTR(INTR_NO,INTR_PHOT,INTR_CONT)
VALUES (seq_intr_no.nextval,'../images/card5.jpg','JAVSCRIPT');

/*   */


/* user*/

INSERT 
INTO users ( USER_NO,USER_NAME,USER_PWD,USER_GEND,USER_AGE,USER_MAIL,USER_PHOT,USER_TYPE)
VALUES (seq_user_no.nextval,'박광희',1234,'male','20s','pkh0452@naver.com','../images/card6.jpg','user'); 


INSERT 
INTO users ( USER_NO,USER_NAME,USER_PWD,USER_GEND,USER_AGE,USER_MAIL,USER_PHOT,USER_TYPE)
VALUES (seq_user_no.nextval,'차병철',1234,'male','30s','bradcha85@naver.com','../images/card6.jpg','user'); 


INSERT 
INTO users ( USER_NO,USER_NAME,USER_PWD,USER_GEND,USER_AGE,USER_MAIL,USER_PHOT,USER_TYPE)
VALUES (seq_user_no.nextval,'유수영',1234,'female','40s','sooyoung@naver.com','../images/card6.jpg','user'); 


INSERT 
INTO users ( USER_NO,USER_NAME,USER_PWD,USER_GEND,USER_AGE,USER_MAIL,USER_PHOT,USER_TYPE)
VALUES (seq_user_no.nextval,'임다영',1234,'female','20s','imvely@naver.com','../images/card6.jpg','user'); 
/* */


/*회원 관심사*/
/* 회원관심사 */


INSERT
INTO USER_INTR(USER_NO,INTR_NO) VALUES (10000,10000);
INSERT
INTO USER_INTR(USER_NO,INTR_NO) VALUES (10000,10001);
INSERT
INTO USER_INTR(USER_NO,INTR_NO) VALUES (10000,10002);
INSERT
INTO USER_INTR(USER_NO,INTR_NO) VALUES (10000,10003);
INSERT
INTO USER_INTR(USER_NO,INTR_NO) VALUES (10000,10004);

INSERT
INTO USER_INTR(USER_NO,INTR_NO) VALUES (10001,10000);
INSERT
INTO USER_INTR(USER_NO,INTR_NO) VALUES (10001,10001);
INSERT
INTO USER_INTR(USER_NO,INTR_NO) VALUES (10001,10002);
INSERT
INTO USER_INTR(USER_NO,INTR_NO) VALUES (10001,10003);
INSERT
INTO USER_INTR(USER_NO,INTR_NO) VALUES (10001,10004);

INSERT
INTO USER_INTR(USER_NO,INTR_NO) VALUES (10002,10000);
INSERT
INTO USER_INTR(USER_NO,INTR_NO) VALUES (10002,10001);
INSERT
INTO USER_INTR(USER_NO,INTR_NO) VALUES (10002,10002);
INSERT
INTO USER_INTR(USER_NO,INTR_NO) VALUES (10002,10003);
INSERT
INTO USER_INTR(USER_NO,INTR_NO) VALUES (10002,10004);

INSERT
INTO USER_INTR(USER_NO,INTR_NO) VALUES (10003,10000);
INSERT
INTO USER_INTR(USER_NO,INTR_NO) VALUES (10003,10001);
INSERT
INTO USER_INTR(USER_NO,INTR_NO) VALUES (10003,10002);
INSERT
INTO USER_INTR(USER_NO,INTR_NO) VALUES (10003,10003);
INSERT
INTO USER_INTR(USER_NO,INTR_NO) VALUES (10003,10004);
/**/

COMMIT;
